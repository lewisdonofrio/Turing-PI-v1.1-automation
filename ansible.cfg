# =============================================================================
# File: /opt/ansible-k3s-cluster/ansible.cfg
# =============================================================================
# Purpose:
#   Repository-local Ansible configuration for the k3s cluster automation
#   framework. Ensures reproducible, stable behavior across all nodes.
# =============================================================================

[defaults]
inventory = /opt/ansible-k3s-cluster/inventory/hosts

# New callback system (ansible-core 2.15+)
result_format = yaml
callbacks_enabled = profile_tasks, timer

# Interpreter stability
interpreter_python = auto_silent

# Roles and collections
roles_path = /opt/ansible-k3s-cluster/roles
collections_paths = /opt/ansible-k3s-cluster/collections

# Retry files
retry_files_enabled = False

# SSH behavior
host_key_checking = False
timeout = 30

# Fact caching
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /home/ansible/.ansible_facts
fact_caching_timeout = 86400

[ssh_connection]
pipelining = True
ssh_args = -o ControlMaster=auto -o ControlPersist=60s

[privilege_escalation]
become = True
become_method = sudo
become_ask_pass = False
